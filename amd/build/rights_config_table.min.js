define("local_ai_manager/rights_config_table",["exports","core/pending"],(function(_exports,_pending){var obj;
/**
   * Module handling the form submission of the statistics tables of local_ai_manager.
   *
   * @module     local_ai_manager/rights_config_table
   * @copyright  2024 ISB Bayern
   * @author     Philipp Memmel
   * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
   */Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.selectors=_exports.init=void 0,_pending=(obj=_pending)&&obj.__esModule?obj:{default:obj};let table=null;const selectors={CHECKBOX:"input[data-userid]",SELECTALLCHECKBOX:"#rights-table-selectall_checkbox",USERIDS_INPUT_FIELD:"#rights-table-userids"};_exports.selectors=selectors;_exports.init=id=>{const pendingPromise=new _pending.default("local_ai_manager/rights_config_table");table=document.getElementById(id),table.querySelectorAll(selectors.CHECKBOX).forEach((checkbox=>{checkbox.addEventListener("change",(event=>{updateUserIds(event.target)}))})),table.querySelector(selectors.SELECTALLCHECKBOX).addEventListener("change",(event=>{updateSelection(event)})),pendingPromise.resolve()};const updateUserIds=checkbox=>{const userIdsInputField=document.querySelector(selectors.USERIDS_INPUT_FIELD),currentValue=0===userIdsInputField.value.trim().length?"":userIdsInputField.value.trim(),currentUserIds=0===currentValue.length?[]:currentValue.split(";"),userid=checkbox.dataset.userid;if(checkbox.checked&&!currentUserIds.includes(userid)&&currentUserIds.push(checkbox.dataset.userid),!checkbox.checked&&currentUserIds.includes(userid)){const index=currentUserIds.indexOf(userid);currentUserIds.splice(index,1)}userIdsInputField.value=currentUserIds.join(";"),updateSelectAllCheckboxState()},updateSelection=changedEvent=>{const allBoxes=table.querySelectorAll(selectors.CHECKBOX);0!==allBoxes.length&&(changedEvent.target.checked?allBoxes.forEach((box=>{box.checked||(box.checked=!0)})):allBoxes.forEach((box=>{box.checked=!1})))},updateSelectAllCheckboxState=()=>{table.querySelector(selectors.SELECTALLCHECKBOX).checked=!!areAllBoxesChecked()},areAllBoxesChecked=()=>{const allBoxes=table.querySelectorAll(selectors.CHECKBOX);return Array.from(allBoxes).reduce(((a,b)=>a&&b.checked),!0)}}));

//# sourceMappingURL=rights_config_table.min.js.map