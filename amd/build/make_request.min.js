define("local_ai_manager/make_request",["exports","core/ajax","core/modal_save_cancel","core/modal_events"],(function(_exports,_ajax,_modal_save_cancel,_modal_events){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}
/**
   * Module providing functions to send requests to the AI tools.
   *
   * @module     local_ai_manager/make_request
   * @copyright  2024 ISB Bayern
   * @author     Philipp Memmel
   * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
   */Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.makeRequest=void 0,_modal_save_cancel=_interopRequireDefault(_modal_save_cancel),_modal_events=_interopRequireDefault(_modal_events);const execMakeRequest=(purpose,prompt,component,contextid,options)=>(0,_ajax.call)([{methodname:"local_ai_manager_post_query",args:{purpose:purpose,prompt:prompt,component:component,contextid:contextid,options:options}}])[0];_exports.makeRequest=async function(purpose,prompt,component){let contextid=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,options=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return new Promise(((resolve,reject)=>execMakeRequest(purpose,prompt,component,contextid,JSON.stringify(options)).then((result=>477===result.code?_modal_save_cancel.default.create({title:"PERSONENBEZOGENE DATEN GEFUNDEN",body:"ES WURDEN PERSONENBEZOGENE DATEN GEFUNDEN. MOECHTEST DU DIESEN PROMPT WIRKLICH ABSCHICKEN?",large:!0,buttons:{save:"ABSCHICKEN",cancel:"ABBRECHEN"},show:!0}):result)).then((result=>(result instanceof _modal_save_cancel.default?(result.getRoot().on(_modal_events.default.save,(()=>{options.disableprecheck=!0,resolve(execMakeRequest(purpose,prompt,component,contextid,JSON.stringify(options)))})),result.getRoot().on(_modal_events.default.cancel,(()=>{resolve(null)}))):resolve(result),result))).catch((error=>(reject(error),error)))))}}));

//# sourceMappingURL=make_request.min.js.map